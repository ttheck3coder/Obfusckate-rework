obf_can_have_rough_info = {
    is_incapable = no
    age >= 6
    exists = scope:character
    scope:character != this
}
obf_can_have_enough_info = {
    is_incapable = no
    age >= 12
    exists = scope:character
    scope:character != this
}
# all for ROOT & scope:character !

gui_skills_are_known = {
    scope:character ?= {
        OR = {
            obf_is_fellow_vassal_or_liege_councillor = yes
            obf_has_high_level_knowledge_flags = yes
        }
    }
}

gui_skills_are_roughly_known = {
    ROOT = { obf_can_have_rough_info = yes }
    scope:character = {
        age >= 6
        NOR = {
            AND = {
                root.age >= 12
                revelation_score >= 30
                age >= 12
                obf_is_fellow_vassal_or_liege_councillor = yes
            }
            AND = {
                root.age >= 12
                age >= 12
                obf_has_close_or_intimate_relation = yes
            }
            AND = {
                root.age >= 12
                age >= 12
                has_character_flag = had_high_level_report
            }
            AND = {
                root.age >= 12
                revelation_score >= 30
                age >= 12
                obf_has_high_level_knowledge_flags = yes
            }
        }
        OR = {
            prestige_level >= 4
            highest_held_title_tier >= tier_empire
            AND = {
                in_diplomatic_range = root
                OR = {
                    prestige_level >= 3
                    highest_held_title_tier >= tier_kingdom
                }
            }
            has_character_flag = has_been_spied
            has_character_flag = had_medium_level_report
            has_character_flag = partially_spied_2
            obf_has_near_intimate_or_close_relation = yes
            AND = {
                OR = {
                    root.age >= 12
                    revelation_score < 30
                }
                obf_is_fellow_vassal_or_liege_councillor = yes
            }
            AND = {
                OR = {
                    root.age >= 12
                    revelation_score < 30
                }
                obf_has_high_level_knowledge_flags = yes
            }
            AND = {
                root.age < 12
                has_character_flag = had_high_level_report
            }
            AND = {
                root.age < 12
                obf_has_close_or_intimate_relation = yes
            }
        }
    }
}

gui_skills_are_not_known = {
    OR = {
        ROOT = { obf_can_have_rough_info = no }
        scope:character ?= {
            OR = {
                age < 6
                NOR = {
                    obf_is_fellow_vassal_or_liege_councillor = yes
                    prestige_level >= 4
                    highest_held_title_tier >= tier_empire
                    AND = {
                        in_diplomatic_range = root
                        OR = {
                            prestige_level >= 3
                            highest_held_title_tier >= tier_kingdom
                        }
                    }
                    has_character_flag = has_been_spied
                    has_character_flag = had_high_level_report
                    has_character_flag = had_medium_level_report
                    has_character_flag = partially_spied_2
                    obf_has_high_level_knowledge_flags = yes
                    obf_has_close_or_intimate_relation = yes
                    obf_has_near_intimate_or_close_relation = yes
                }
            }
        }
    }
}

gui_any_skill_for_humble = {
    root = { obf_can_have_enough_info = yes }
    scope:character = {
        age >= 12
        revelation_score >= 30
        has_character_flag = humble_character
    }
}

gui_skills_diplo_for_known = {
    root = { obf_can_have_enough_info = yes }
    scope:character = {
        # 加了下面这个or之后熟悉的人不显示ljl
        # OR = {
        #     this ?= scope:laamp_first_recruit
        #     this ?= scope:laamp_second_recruit
        #     this ?= scope:laamp_third_recruit
        #     this ?= scope:laamp_generic_jane
        #     this ?= scope:laamp_spouse_material
        #     this ?= scope:laamp_hooded_figure         
        # }
        NOR = {
            has_character_flag = humble_character
            has_character_flag = illusory_diplomat
        }
        age >= 12
        OR = {
            AND = {exists = root.var:laamp_first_recruit_var this ?= root.var:laamp_first_recruit_var }
            AND = {exists = root.var:laamp_second_recruit_var this ?= root.var:laamp_second_recruit_var }
            AND = {exists = root.var:laamp_third_recruit_var this ?= root.var:laamp_third_recruit_var }
            AND = {exists = root.var:laamp_generic_jane_var this ?= root.var:laamp_generic_jane_var }
            AND = {exists = root.var:laamp_spouse_material_var this ?= root.var:laamp_spouse_material_var }
            AND = {exists = root.var:laamp_hooded_figure_var this ?= root.var:laamp_hooded_figure_var }
            has_character_flag = had_high_level_report
            obf_has_close_or_intimate_relation = yes
            AND = {
                revelation_score >= 30
                OR = {
                    obf_is_fellow_vassal_or_liege_councillor = yes
                    has_character_flag = illusory_administrator
                    has_character_flag = illusory_intriguer
                    has_character_flag = illusory_scholar
                    has_character_flag = illusory_warrior
                    has_character_flag = partially_spied_3
                }
            }
        }
    }
}

gui_skills_diplo_for_illusory = {
    root = { obf_can_have_enough_info = yes }
    scope:character = {
        age >= 12
        revelation_score >= 30
        has_character_flag = illusory_diplomat
    }
}

gui_skills_martial_for_known = {
    root = { obf_can_have_enough_info = yes }
    scope:character = {
        # OR = {
        #     this ?= scope:laamp_first_recruit
        #     this ?= scope:laamp_second_recruit
        #     this ?= scope:laamp_third_recruit
        #     this ?= scope:laamp_generic_jane
        #     this ?= scope:laamp_spouse_material
        #     this ?= scope:laamp_hooded_figure         
        # }
        NOR = {
            has_character_flag = humble_character
            has_character_flag = illusory_warrior
        }
        age >= 12
        OR = {
            AND = {exists = root.var:laamp_first_recruit_var this ?= root.var:laamp_first_recruit_var }
            AND = {exists = root.var:laamp_second_recruit_var this ?= root.var:laamp_second_recruit_var }
            AND = {exists = root.var:laamp_third_recruit_var this ?= root.var:laamp_third_recruit_var }
            AND = {exists = root.var:laamp_generic_jane_var this ?= root.var:laamp_generic_jane_var }
            AND = {exists = root.var:laamp_spouse_material_var this ?= root.var:laamp_spouse_material_var }
            AND = {exists = root.var:laamp_hooded_figure_var this ?= root.var:laamp_hooded_figure_var }
            has_character_flag = had_high_level_report
            obf_has_close_or_intimate_relation = yes
            AND = {
                revelation_score >= 30
                OR = {
                    obf_is_fellow_vassal_or_liege_councillor = yes
                    has_character_flag = illusory_administrator
                    has_character_flag = illusory_intriguer
                    has_character_flag = illusory_scholar
                    has_character_flag = illusory_warrior
                    has_character_flag = partially_spied_3
                }
            }
        }
    }
}

gui_skills_martial_for_illusory = {
    root = { obf_can_have_enough_info = yes }
    scope:character = {
        age >= 12
        revelation_score >= 30
        has_character_flag = illusory_warrior
    }
}

gui_skills_steward_for_known = {
    root = { obf_can_have_enough_info = yes }
    scope:character ?= {
        # OR = {
        #     this ?= scope:laamp_first_recruit
        #     this ?= scope:laamp_second_recruit
        #     this ?= scope:laamp_third_recruit
        #     this ?= scope:laamp_generic_jane
        #     this ?= scope:laamp_spouse_material
        #     this ?= scope:laamp_hooded_figure         
        # }
        NOR = {
            has_character_flag = humble_character
            has_character_flag = illusory_administrator
        }
        age >= 12
        OR = {
            AND = {exists = root.var:laamp_first_recruit_var this ?= root.var:laamp_first_recruit_var }
            AND = {exists = root.var:laamp_second_recruit_var this ?= root.var:laamp_second_recruit_var }
            AND = {exists = root.var:laamp_third_recruit_var this ?= root.var:laamp_third_recruit_var }
            AND = {exists = root.var:laamp_generic_jane_var this ?= root.var:laamp_generic_jane_var }
            AND = {exists = root.var:laamp_spouse_material_var this ?= root.var:laamp_spouse_material_var }
            AND = {exists = root.var:laamp_hooded_figure_var this ?= root.var:laamp_hooded_figure_var }
            has_character_flag = had_high_level_report
            obf_has_close_or_intimate_relation = yes
            AND = {
                revelation_score >= 30
                OR = {
                    obf_is_fellow_vassal_or_liege_councillor = yes
                    has_character_flag = illusory_administrator
                    has_character_flag = illusory_intriguer
                    has_character_flag = illusory_scholar
                    has_character_flag = illusory_warrior
                    has_character_flag = partially_spied_3
                }
            }
        }
    }
}

gui_skills_steward_for_illusory = {
    root = { obf_can_have_enough_info = yes }
    scope:character = {
        age >= 12
        revelation_score >= 30
        has_character_flag = illusory_administrator
    }
}

gui_skills_intrigue_for_known = {
    root = { obf_can_have_enough_info = yes }
    scope:character = {
        # OR = {
        #     this ?= scope:laamp_first_recruit
        #     this ?= scope:laamp_second_recruit
        #     this ?= scope:laamp_third_recruit
        #     this ?= scope:laamp_generic_jane
        #     this ?= scope:laamp_spouse_material
        #     this ?= scope:laamp_hooded_figure         
        # }
        NOR = {
            has_character_flag = humble_character
            has_character_flag = illusory_intriguer
        }
        age >= 12
        OR = {
            AND = {exists = root.var:laamp_first_recruit_var this ?= root.var:laamp_first_recruit_var }
            AND = {exists = root.var:laamp_second_recruit_var this ?= root.var:laamp_second_recruit_var }
            AND = {exists = root.var:laamp_third_recruit_var this ?= root.var:laamp_third_recruit_var }
            AND = {exists = root.var:laamp_generic_jane_var this ?= root.var:laamp_generic_jane_var }
            AND = {exists = root.var:laamp_spouse_material_var this ?= root.var:laamp_spouse_material_var }
            AND = {exists = root.var:laamp_hooded_figure_var this ?= root.var:laamp_hooded_figure_var }
            has_character_flag = had_high_level_report
            obf_has_close_or_intimate_relation = yes
            AND = {
                revelation_score >= 30
                OR = {
                    obf_is_fellow_vassal_or_liege_councillor = yes
                    has_character_flag = illusory_administrator
                    has_character_flag = illusory_intriguer
                    has_character_flag = illusory_scholar
                    has_character_flag = illusory_warrior
                    has_character_flag = partially_spied_3
                }
            }
        }
    }
}

gui_skills_intrigue_for_illusory = {
    root = { obf_can_have_enough_info = yes }
    scope:character = {
        age >= 12
        revelation_score >= 30
        has_character_flag = illusory_intriguer
    }
}

gui_skills_learning_for_known = {
    root = { obf_can_have_enough_info = yes }
    scope:character = {
        # OR = {
        #     this ?= scope:laamp_first_recruit
        #     this ?= scope:laamp_second_recruit
        #     this ?= scope:laamp_third_recruit
        #     this ?= scope:laamp_generic_jane
        #     this ?= scope:laamp_spouse_material
        #     this ?= scope:laamp_hooded_figure         
        # }
        NOR = {
            has_character_flag = humble_character
            has_character_flag = illusory_scholar
        }
        age >= 12
        OR = {
            AND = {exists = root.var:laamp_first_recruit_var this ?= root.var:laamp_first_recruit_var }
            AND = {exists = root.var:laamp_second_recruit_var this ?= root.var:laamp_second_recruit_var }
            AND = {exists = root.var:laamp_third_recruit_var this ?= root.var:laamp_third_recruit_var }
            AND = {exists = root.var:laamp_generic_jane_var this ?= root.var:laamp_generic_jane_var }
            AND = {exists = root.var:laamp_spouse_material_var this ?= root.var:laamp_spouse_material_var }
            AND = {exists = root.var:laamp_hooded_figure_var this ?= root.var:laamp_hooded_figure_var }
            obf_has_close_or_intimate_relation = yes
            AND = {
                revelation_score >= 30
                OR = {
                    obf_is_fellow_vassal_or_liege_councillor = yes
                    has_character_flag = illusory_administrator
                    has_character_flag = illusory_intriguer
                    has_character_flag = illusory_scholar
                    has_character_flag = illusory_warrior
                    has_character_flag = partially_spied_3
                }
            }
        }
    }
}

gui_skills_learning_for_illusory = {
    root = { obf_can_have_enough_info = yes }

    scope:character = {
        age >= 12
        revelation_score >= 30
        has_character_flag = illusory_scholar
    }
}
